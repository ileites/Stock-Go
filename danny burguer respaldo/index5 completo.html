<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danny's Burger - Gesti√≥n de Stock</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-bg: #1a1a1a;
            --secondary-bg: #2d2d2d;
            --card-bg: #3a3a3a;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --accent-gold: #f4d03f;
            --accent-gold-hover: #f7dc6f;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --border-color: #555555;
            --shadow: rgba(0, 0, 0, 0.5);
        }
        
        [data-theme="light"] {
            --primary-bg: #f8f9fa;
            --secondary-bg: #ffffff;
            --card-bg: #ffffff;
            --text-primary: #2c3e50;
            --text-secondary: #6c757d;
            --accent-gold: #d4a574;
            --accent-gold-hover: #c89456;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --border-color: #dee2e6;
            --shadow: rgba(0, 0, 0, 0.1);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--primary-bg);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--secondary-bg);
            border-radius: 20px;
            box-shadow: 0 20px 40px var(--shadow);
            overflow: hidden;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .header {
            background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            border-bottom: 3px solid var(--accent-gold);
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><pattern id="grain" width="100" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1.5" fill="%23f4d03f" opacity="0.1"/><circle cx="30" cy="5" r="1" fill="%23f4d03f" opacity="0.15"/><circle cx="50" cy="15" r="1.2" fill="%23f4d03f" opacity="0.1"/><circle cx="70" cy="8" r="0.8" fill="%23f4d03f" opacity="0.2"/><circle cx="90" cy="12" r="1.3" fill="%23f4d03f" opacity="0.12"/></pattern></defs><rect width="100" height="20" fill="url(%23grain)"/></svg>') repeat;
            pointer-events: none;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .logo-circle {
            width: 80px;
            height: 80px;
            background: #2d2d2d;
            border: 3px solid var(--accent-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 0 20px rgba(244, 208, 63, 0.3);
        }
        
        .burger-icon {
            color: var(--accent-gold);
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .header h1 {
            font-size: 3em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            color: var(--accent-gold);
            font-weight: 300;
            letter-spacing: 1px;
            position: relative;
            z-index: 1;
        }
        
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 30px;
            background: var(--accent-gold);
            color: #1a1a1a;
            border: none;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(244, 208, 63, 0.3);
        }
        
        .theme-toggle:hover {
            background: var(--accent-gold-hover);
            transform: rotate(180deg) scale(1.1);
        }
        
        .nav-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            padding: 30px;
            background: var(--primary-bg);
            border-bottom: 2px solid var(--border-color);
        }
        
        .nav-btn {
            background: linear-gradient(135deg, var(--card-bg), var(--secondary-bg));
            color: var(--text-primary);
            border: 2px solid var(--border-color);
            padding: 20px;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
            opacity: 0.1;
            transition: left 0.5s ease;
        }
        
        .nav-btn:hover::before {
            left: 100%;
        }
        
        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px var(--shadow);
            border-color: var(--accent-gold);
        }
        
        .nav-btn.active {
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-gold-hover));
            color: #1a1a1a;
            border-color: var(--accent-gold);
            box-shadow: 0 0 20px rgba(244, 208, 63, 0.4);
        }
        
        .content {
            padding: 30px;
            min-height: 500px;
            background: var(--primary-bg);
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section h2 {
            color: var(--text-primary);
            margin-bottom: 25px;
            font-size: 2em;
            text-align: center;
            position: relative;
        }
        
        .section h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--accent-gold);
            border-radius: 2px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--text-primary);
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1em;
            background: var(--card-bg);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            border-color: var(--accent-gold);
            outline: none;
            box-shadow: 0 0 10px rgba(244, 208, 63, 0.3);
        }
        
        .btn {
            background: linear-gradient(135deg, var(--success), #2ecc71);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }
        
        .btn-danger:hover {
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
        }
        
        .btn-gold {
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-gold-hover));
            color: #1a1a1a;
            box-shadow: 0 4px 15px rgba(244, 208, 63, 0.3);
        }
        
        .btn-gold:hover {
            box-shadow: 0 8px 25px rgba(244, 208, 63, 0.4);
        }
        
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stock-card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px var(--shadow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stock-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--accent-gold);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .stock-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-gold);
        }
        
        .stock-card:hover::before {
            opacity: 1;
        }
        
        .stock-card h3 {
            color: var(--text-primary);
            margin-bottom: 10px;
            font-size: 1.3em;
        }
        
        .stock-quantity {
            font-size: 1.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .stock-quantity.low {
            color: var(--danger);
        }
        
        .stock-quantity.medium {
            color: var(--warning);
        }
        
        .stock-quantity.good {
            color: var(--success);
        }
        
        .sales-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .sale-btn {
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-gold-hover));
            color: #1a1a1a;
            border: 2px solid var(--accent-gold);
            padding: 25px 20px;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(244, 208, 63, 0.3);
        }
        
        .sale-btn::before {
            content: 'üçî';
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 3em;
            opacity: 0.1;
        }
        
        .sale-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 15px 35px rgba(244, 208, 63, 0.4);
        }
        
        .sale-btn:disabled {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            color: white;
            cursor: not-allowed;
            border-color: var(--danger);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }
        
        .recipe-item {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .recipe-item:hover {
            border-color: var(--accent-gold);
        }
        
        .sales-report {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px var(--shadow);
            transition: all 0.3s ease;
        }
        
        .sales-report h3 {
            color: var(--accent-gold);
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .alert {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: bold;
            border: 2px solid;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .alert-success {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success);
            border-color: var(--success);
        }
        
        .alert-warning {
            background: rgba(243, 156, 18, 0.1);
            color: var(--warning);
            border-color: var(--warning);
        }
        
        .alert-danger {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger);
            border-color: var(--danger);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px var(--shadow);
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-primary);
        }
        
        th {
            background: var(--accent-gold);
            color: #1a1a1a;
            font-weight: bold;
        }
        
        tr:hover {
            background: rgba(244, 208, 63, 0.05);
        }
        
        .vintage-decoration {
            text-align: center;
            margin: 20px 0;
            color: var(--accent-gold);
            font-size: 1.5em;
        }
        
        .edit-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        .edit-modal.show {
            display: flex;
        }
        
        .modal-content {
            background: var(--secondary-bg);
            border: 3px solid var(--accent-gold);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px var(--shadow);
            position: relative;
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 2px solid var(--accent-gold);
            padding-bottom: 15px;
        }
        
        .modal-header h3 {
            color: var(--accent-gold);
            font-size: 1.8em;
            margin-bottom: 5px;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            background: var(--danger);
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .close-modal:hover {
            background: #c0392b;
            transform: scale(1.1);
        }
        
        .modal-form-group {
            margin-bottom: 20px;
        }
        
        .modal-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--text-primary);
        }
        
        .modal-form-group input, .modal-form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1em;
            background: var(--card-bg);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        
        .modal-form-group input:focus, .modal-form-group select:focus {
            border-color: var(--accent-gold);
            outline: none;
            box-shadow: 0 0 10px rgba(244, 208, 63, 0.3);
        }
        
        .modal-ingredients {
            background: var(--primary-bg);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border: 1px solid var(--border-color);
        }
        
        .modal-ingredient-item {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .modal-ingredient-item select, .modal-ingredient-item input {
            margin: 0;
            flex: 1;
        }
        
        .modal-ingredient-item input[type="number"] {
            flex: 0 0 80px;
        }
        
        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }
        
        @media (max-width: 768px) {
            .modal-content {
                margin: 10px;
                padding: 20px;
            }
            
            .modal-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .logo-section {
                flex-direction: column;
                gap: 15px;
            }
            
            .logo-circle {
                width: 60px;
                height: 60px;
            }
            
            .burger-icon {
                font-size: 2em;
            }
            
            .nav-buttons {
                grid-template-columns: 1fr;
                padding: 20px;
            }
            
            .content {
                padding: 20px;
            }
            
            .stock-grid, .sales-grid {
                grid-template-columns: 1fr;
            }
            
            .theme-toggle {
                top: 10px;
                right: 15px;
                padding: 10px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body data-theme="dark">
    <div class="container">
        <div class="header">
            <button class="theme-toggle" onclick="toggleTheme()" title="Cambiar tema">
                <span id="themeIcon">‚òÄÔ∏è</span>
            </button>
            
            <div class="logo-section">
                <div class="logo-circle">
                    <div class="burger-icon">üçî</div>
                </div>
                <div>
                    <h1>DANNY'S</h1>
                    <div class="subtitle">BURGER ‚Ä¢ 2024</div>
                </div>
            </div>
            
            <div class="vintage-decoration">‚óÜ ‚óá ‚óÜ</div>
        </div>
        
        <div class="nav-buttons">
            <button class="nav-btn active" onclick="showSection('stock')">üì¶ Stock Actual</button>
            <button class="nav-btn" onclick="showSection('add-stock')">‚ûï Cargar Stock</button>
            <button class="nav-btn" onclick="showSection('recipes')">üçΩÔ∏è Recetas/Combos</button>
            <button class="nav-btn" onclick="showSection('sales')">üí∞ Registrar Venta</button>
            <button class="nav-btn" onclick="showSection('reports')">üìä Reportes</button>
        </div>
        
        <div class="content">
            <!-- Stock Actual -->
            <div id="stock" class="section active">
                <h2>üì¶ Stock Actual</h2>
                <div class="vintage-decoration">‚óá ‚óÜ ‚óá</div>
                <div id="stockDisplay" class="stock-grid">
                    <div class="stock-card">
                        <h3>¬°Bienvenido a Danny's Burger!</h3>
                        <p>Comienza agregando productos en la secci√≥n "Cargar Stock" o carga los datos de ejemplo.</p>
                        <button class="btn btn-gold" onclick="loadSampleData()">Cargar Datos de Ejemplo</button>
                    </div>
                </div>
            </div>
            
            <!-- Cargar Stock -->
            <div id="add-stock" class="section">
                <h2>‚ûï Cargar Stock</h2>
                <div class="vintage-decoration">‚óá ‚óÜ ‚óá</div>
                <div class="form-group">
                    <label for="productName">Nombre del Producto:</label>
                    <input type="text" id="productName" placeholder="Ej: Pan de hamburguesa" list="productSuggestions" autocomplete="off">
                    <datalist id="productSuggestions"></datalist>
                </div>
                <div class="form-group">
                    <label for="productQuantity">Cantidad:</label>
                    <input type="number" id="productQuantity" placeholder="0" min="0">
                </div>
                <div class="form-group">
                    <label for="productUnit">Unidad:</label>
                    <select id="productUnit">
                        <option value="unidades">Unidades</option>
                        <option value="kg">Kilogramos</option>
                        <option value="litros">Litros</option>
                        <option value="gramos">Gramos</option>
                        <option value="ml">Mililitros</option>
                    </select>
                </div>
                <button class="btn btn-gold" onclick="addStock()">Agregar Producto</button>
                <button class="btn" onclick="loadSampleData()">Cargar Datos de Ejemplo</button>
            </div>
            
            <!-- Recetas/Combos -->
            <div id="recipes" class="section">
                <h2>üçΩÔ∏è Recetas y Combos</h2>
                <div class="vintage-decoration">‚óá ‚óÜ ‚óá</div>
                <div class="form-group">
                    <label for="recipeName">Nombre del Combo/Receta:</label>
                    <input type="text" id="recipeName" placeholder="Ej: Danny's Special Burger">
                </div>
                <div class="form-group">
                    <label for="recipePrice">Precio de Venta ($):</label>
                    <input type="number" id="recipePrice" placeholder="0" min="0" step="0.01">
                </div>
                <div id="recipeIngredients">
                    <h3>Ingredientes:</h3>
                    <div id="ingredientsList"></div>
                    <button class="btn" onclick="addIngredient()">Agregar Ingrediente</button>
                </div>
                <button class="btn btn-gold" onclick="saveRecipe()">Guardar Receta</button>
                
                <div id="savedRecipes"></div>
            </div>
            
            <!-- Registrar Ventas -->
            <div id="sales" class="section">
                <h2>üí∞ Registrar Venta</h2>
                <div class="vintage-decoration">‚óá ‚óÜ ‚óá</div>
                <div id="salesButtons" class="sales-grid"></div>
            </div>
            
            <!-- Reportes -->
            <div id="reports" class="section">
                <h2>üìä Reportes</h2>
                <div class="vintage-decoration">‚óá ‚óÜ ‚óá</div>
                <div class="sales-report">
                    <h3>üìà Ventas de Hoy</h3>
                    <div id="todaySales"></div>
                </div>
                <div class="sales-report">
                    <h3>üìã Historial de Movimientos</h3>
                    <div id="movementHistory"></div>
                </div>
                <button class="btn btn-danger" onclick="clearAllData()">üóëÔ∏è Limpiar Todos los Datos</button>
            </div>
        </div>
    </div>
    
    <!-- Modal para editar recetas -->
    <div id="editModal" class="edit-modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeEditModal()">√ó</button>
            
            <div class="modal-header">
                <h3>‚úèÔ∏è Editar Receta</h3>
                <p>Modifica los datos y guarda los cambios</p>
            </div>
            
            <div class="modal-form-group">
                <label for="editRecipeName">Nombre del Combo/Receta:</label>
                <input type="text" id="editRecipeName" placeholder="Nombre de la receta">
            </div>
            
            <div class="modal-form-group">
                <label for="editRecipePrice">Precio de Venta ($):</label>
                <input type="number" id="editRecipePrice" placeholder="0" min="0" step="0.01">
            </div>
            
            <div class="modal-form-group">
                <label>Ingredientes:</label>
                <div id="editIngredientsList" class="modal-ingredients"></div>
                <button type="button" class="btn" onclick="addEditIngredient()">+ Agregar Ingrediente</button>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-gold" onclick="saveEditedRecipe()">üíæ Guardar Cambios</button>
                <button class="btn btn-danger" onclick="closeEditModal()">‚ùå Cancelar</button>
            </div>
        </div>
    </div>
    
    <script>
        let currentEditingRecipe = null;
        
        // Datos almacenados en memoria
        let stock = {};
        let recipes = {};
        let sales = [];
        let movements = [];
        
        // Funci√≥n para cambiar tema
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            const themeIcon = document.getElementById('themeIcon');
            
            body.setAttribute('data-theme', newTheme);
            themeIcon.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }
        
        // Funci√≥n para mostrar secciones
        function showSection(sectionName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(sectionName).classList.add('active');
            event.target.classList.add('active');
            
            // Actualizar displays cuando se cambia de secci√≥n
            if (sectionName === 'stock') updateStockDisplay();
            if (sectionName === 'recipes') updateRecipesDisplay();
            if (sectionName === 'sales') updateSalesButtons();
            if (sectionName === 'reports') updateReports();
        }
        
        // Agregar stock
        function addStock() {
            const name = document.getElementById('productName').value.trim();
            const quantity = parseInt(document.getElementById('productQuantity').value);
            const unit = document.getElementById('productUnit').value;
            
            if (!name || quantity < 0) {
                alert('Por favor completa todos los campos correctamente');
                return;
            }
            
            if (stock[name]) {
                stock[name].quantity += quantity;
            } else {
                stock[name] = { quantity, unit };
            }
            
            // Registrar movimiento
            movements.push({
                date: new Date().toLocaleString('es-AR'),
                type: 'Entrada',
                product: name,
                quantity: quantity,
                description: `Carga de stock: ${quantity} ${unit}`
            });
            
            document.getElementById('productName').value = '';
            document.getElementById('productQuantity').value = '';
            
            showAlert('success', `‚úÖ Se agregaron ${quantity} ${unit} de ${name}`);
            updateStockDisplay();
            updateProductSuggestions();
        }
        
        // Actualizar display de stock
        function updateStockDisplay() {
            const container = document.getElementById('stockDisplay');
            
            if (Object.keys(stock).length === 0) {
                container.innerHTML = `
                    <div class="stock-card">
                        <h3>¬°Bienvenido a Danny's Burger!</h3>
                        <p>Comienza agregando productos en la secci√≥n "Cargar Stock" o carga los datos de ejemplo.</p>
                        <button class="btn btn-gold" onclick="loadSampleData()">Cargar Datos de Ejemplo</button>
                    </div>
                `;
                return;
            }
            
            let tableHTML = `
                <table>
                    <tr>
                        <th>Producto</th>
                        <th>Cantidad</th>
                        <th>Acciones</th>
                    </tr>
            `;
            
            for (let [name, data] of Object.entries(stock)) {
                let quantityClass = 'good';
                if (data.quantity <= 5) quantityClass = 'low';
                else if (data.quantity <= 15) quantityClass = 'medium';
                
                tableHTML += `
                    <tr>
                        <td>${name}</td>
                        <td class="stock-quantity ${quantityClass}">${data.quantity} ${data.unit}</td>
                        <td><button class="btn btn-danger" onclick="removeProduct('${name}')">Eliminar</button></td>
                    </tr>
                `;
            }
            
            tableHTML += '</table>';
            container.innerHTML = tableHTML;
        }
        
        // Eliminar producto
        function removeProduct(name) {
            if (confirm(`¬øEst√°s seguro de eliminar "${name}" del stock?`)) {
                delete stock[name];
                updateStockDisplay();
                updateProductSuggestions();
                showAlert('warning', `‚ö†Ô∏è Se elimin√≥ ${name} del stock`);
            }
        }
        
        // Agregar ingrediente a receta
        function addIngredient() {
            const container = document.getElementById('ingredientsList');
            const ingredientDiv = document.createElement('div');
            ingredientDiv.className = 'recipe-item';
            
            const stockOptions = Object.keys(stock).map(item => 
                `<option value="${item}">${item}</option>`
            ).join('');
            
            ingredientDiv.innerHTML = `
                <select class="ingredient-select" style="margin-right: 10px;">
                    <option value="">Seleccionar producto...</option>
                    ${stockOptions}
                </select>
                <input type="number" placeholder="Cantidad" min="1" class="ingredient-quantity" style="width: 100px; margin: 0 10px;">
                <button class="btn btn-danger" onclick="this.parentElement.remove()">Quitar</button>
            `;
            
            container.appendChild(ingredientDiv);
        }
        
        // Guardar receta
        function saveRecipe() {
            const name = document.getElementById('recipeName').value.trim();
            const price = parseFloat(document.getElementById('recipePrice').value);
            const ingredientItems = document.querySelectorAll('#ingredientsList .recipe-item');
            
            if (!name || !price || ingredientItems.length === 0) {
                alert('Por favor completa todos los campos de la receta');
                return;
            }
            
            const ingredients = {};
            let validRecipe = true;
            
            ingredientItems.forEach(item => {
                const select = item.querySelector('.ingredient-select');
                const quantity = item.querySelector('.ingredient-quantity');
                
                if (select.value && quantity.value) {
                    ingredients[select.value] = parseInt(quantity.value);
                } else {
                    validRecipe = false;
                }
            });
            
            if (!validRecipe) {
                alert('Todos los ingredientes deben tener producto y cantidad');
                return;
            }
            
            recipes[name] = { ingredients, price };
            
            document.getElementById('recipeName').value = '';
            document.getElementById('recipePrice').value = '';
            document.getElementById('ingredientsList').innerHTML = '';
            
            showAlert('success', `‚úÖ Receta "${name}" guardada correctamente`);
            updateRecipesDisplay();
        }
        
        // FUNCI√ìN CORREGIDA - Actualizar display de recetas
        function updateRecipesDisplay() {
            const container = document.getElementById('savedRecipes');
            container.innerHTML = '<h3>üçî Recetas Guardadas:</h3>';
            
            for (let [name, recipe] of Object.entries(recipes)) {
                const recipeDiv = document.createElement('div');
                recipeDiv.className = 'recipe-item';
                
                const ingredientsList = Object.entries(recipe.ingredients)
                    .map(([ingredient, quantity]) => `${quantity} ${ingredient}`)
                    .join(', ');
                
                // Crear el contenido HTML sin onclick
                recipeDiv.innerHTML = `
                    <div>
                        <strong>${name}</strong> - ${recipe.price}<br>
                        <small>Ingredientes: ${ingredientsList}</small>
                    </div>
                    <div>
                        <button class="btn edit-btn" style="margin-right: 5px;">Editar</button>
                        <button class="btn btn-danger delete-btn">Eliminar</button>
                    </div>
                `;
                
                // Agregar event listeners directamente (evita problemas con comillas)
                const editBtn = recipeDiv.querySelector('.edit-btn');
                const deleteBtn = recipeDiv.querySelector('.delete-btn');
                
                editBtn.addEventListener('click', () => editRecipe(name));
                deleteBtn.addEventListener('click', () => deleteRecipe(name));
                
                container.appendChild(recipeDiv);
            }
        }
        
        // Actualizar sugerencias de productos
        function updateProductSuggestions() {
            const datalist = document.getElementById('productSuggestions');
            datalist.innerHTML = '';
            
            Object.keys(stock).forEach(productName => {
                const option = document.createElement('option');
                option.value = productName;
                datalist.appendChild(option);
            });
        }
        
        // Editar receta existente
        function editRecipe(recipeName) {
            currentEditingRecipe = recipeName;
            const recipe = recipes[recipeName];
            
            // Llenar los campos del modal
            document.getElementById('editRecipeName').value = recipeName;
            document.getElementById('editRecipePrice').value = recipe.price;
            
            // Limpiar ingredientes del modal
            const ingredientsList = document.getElementById('editIngredientsList');
            ingredientsList.innerHTML = '';
            
            // Agregar ingredientes existentes
            Object.entries(recipe.ingredients).forEach(([ingredient, quantity]) => {
                addEditIngredient(ingredient, quantity);
            });
            
            // Mostrar el modal
            document.getElementById('editModal').classList.add('show');
        }
        
        // Agregar ingrediente en el modal de edici√≥n
        function addEditIngredient(selectedIngredient = '', selectedQuantity = '') {
            const container = document.getElementById('editIngredientsList');
            const ingredientDiv = document.createElement('div');
            ingredientDiv.className = 'modal-ingredient-item';
            
            const stockOptions = Object.keys(stock).map(item => 
                `<option value="${item}" ${item === selectedIngredient ? 'selected' : ''}>${item}</option>`
            ).join('');
            
            ingredientDiv.innerHTML = `
                <select class="edit-ingredient-select">
                    <option value="">Seleccionar producto...</option>
                    ${stockOptions}
                </select>
                <input type="number" placeholder="Cantidad" min="1" class="edit-ingredient-quantity" value="${selectedQuantity}">
                <button type="button" class="btn btn-danger" style="padding: 8px 12px; font-size: 0.9em;" onclick="this.parentElement.remove()">‚ùå</button>
            `;
            
            container.appendChild(ingredientDiv);
        }
        
        // Guardar receta editada
        function saveEditedRecipe() {
            const newName = document.getElementById('editRecipeName').value.trim();
            const newPrice = parseFloat(document.getElementById('editRecipePrice').value);
            const ingredientItems = document.querySelectorAll('#editIngredientsList .modal-ingredient-item');
            
            if (!newName || !newPrice || ingredientItems.length === 0) {
                alert('Por favor completa todos los campos de la receta');
                return;
            }
            
            const ingredients = {};
            let validRecipe = true;
            
            ingredientItems.forEach(item => {
                const select = item.querySelector('.edit-ingredient-select');
                const quantity = item.querySelector('.edit-ingredient-quantity');
                
                if (select.value && quantity.value && parseInt(quantity.value) > 0) {
                    ingredients[select.value] = parseInt(quantity.value);
                } else {
                    validRecipe = false;
                }
            });
            
            if (!validRecipe) {
                alert('Todos los ingredientes deben tener producto y cantidad v√°lida');
                return;
            }
            
            // Si cambi√≥ el nombre, eliminar la receta anterior
            if (currentEditingRecipe && currentEditingRecipe !== newName) {
                delete recipes[currentEditingRecipe];
            }
            
            // Guardar la receta (nueva o actualizada)
            recipes[newName] = { ingredients, price: newPrice };
            
            closeEditModal();
            showAlert('success', `‚úÖ Receta "${newName}" actualizada correctamente`);
            updateRecipesDisplay();
            updateSalesButtons();
        }
        
        // Cerrar modal de edici√≥n
        function closeEditModal() {
            document.getElementById('editModal').classList.remove('show');
            currentEditingRecipe = null;
        }
        
        // Cerrar modal al hacer clic fuera
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('editModal');
            if (event.target === modal) {
                closeEditModal();
            }
        });
        
        function deleteRecipe(name) {
            if (confirm(`¬øEliminar la receta "${name}"?`)) {
                delete recipes[name];
                updateRecipesDisplay();
                updateSalesButtons();
                showAlert('warning', `‚ö†Ô∏è Se elimin√≥ la receta ${name}`);
            }
        }
        
        // Actualizar botones de venta
        function updateSalesButtons() {
            const container = document.getElementById('salesButtons');
            container.innerHTML = '';
            
            if (Object.keys(recipes).length === 0) {
                container.innerHTML = `
                    <div class="sale-btn" style="background: #95a5a6; cursor: not-allowed; color: white;">
                        üçî No hay recetas disponibles<br>
                        <small>Crea recetas en la secci√≥n correspondiente</small>
                    </div>
                `;
                return;
            }
            
            for (let [name, recipe] of Object.entries(recipes)) {
                const canMake = checkCanMakeRecipe(name);
                const button = document.createElement('button');
                button.className = 'sale-btn';
                
                if (canMake) {
                    button.onclick = () => makeSale(name);
                    button.innerHTML = `
                        üçî ${name}<br>
                        <strong>${recipe.price}</strong>
                    `;
                } else {
                    button.disabled = true;
                    button.innerHTML = `
                        ‚ùå ${name}<br>
                        <small>Sin stock suficiente</small>
                    `;
                }
                
                container.appendChild(button);
            }
        }
        
        // Verificar si se puede hacer la receta
        function checkCanMakeRecipe(recipeName) {
            const recipe = recipes[recipeName];
            
            for (let [ingredient, needed] of Object.entries(recipe.ingredients)) {
                if (!stock[ingredient] || stock[ingredient].quantity < needed) {
                    return false;
                }
            }
            
            return true;
        }
        
        // Realizar venta
        function makeSale(recipeName) {
            if (!checkCanMakeRecipe(recipeName)) {
                alert('No hay stock suficiente para esta receta');
                return;
            }
            
            const recipe = recipes[recipeName];
            
            // Descontar ingredientes del stock
            for (let [ingredient, needed] of Object.entries(recipe.ingredients)) {
                stock[ingredient].quantity -= needed;
                
                // Registrar movimiento
                movements.push({
                    date: new Date().toLocaleString('es-AR'),
                    type: 'Salida',
                    product: ingredient,
                    quantity: needed,
                    description: `Venta: ${recipeName}`
                });
            }
            
            // Registrar venta
            sales.push({
                date: new Date().toLocaleString('es-AR'),
                product: recipeName,
                price: recipe.price
            });
            
            showAlert('success', `‚úÖ Venta registrada: ${recipeName} - ${recipe.price}`);
            updateSalesButtons();
            updateStockDisplay();
        }
        
        // Actualizar reportes
        function updateReports() {
            // Ventas de hoy
            const today = new Date().toLocaleDateString('es-AR');
            const todaySales = sales.filter(sale => {
                const saleDate = new Date(sale.date.split(' ')[0].split('/').reverse().join('-')).toLocaleDateString('es-AR');
                return saleDate === today;
            });
            
            let todayTotal = 0;
            const todayContainer = document.getElementById('todaySales');
            
            if (todaySales.length === 0) {
                todayContainer.innerHTML = '<p>No hay ventas registradas hoy üìä</p>';
            } else {
                let salesHTML = '<table>';
                salesHTML += '<tr><th>üçî Producto</th><th>üí∞ Precio</th><th>üïí Hora</th></tr>';
                
                todaySales.forEach(sale => {
                    todayTotal += sale.price;
                    const time = sale.date.split(' ')[1];
                    salesHTML += `<tr><td>${sale.product}</td><td>${sale.price}</td><td>${time}</td></tr>`;
                });
                
                salesHTML += '</table>';
                salesHTML += `<p style="text-align: center; font-size: 1.3em; margin-top: 15px;"><strong>üíµ Total del d√≠a: ${todayTotal}</strong></p>`;
                todayContainer.innerHTML = salesHTML;
            }
            
            // Historial de movimientos
            const historyContainer = document.getElementById('movementHistory');
            
            if (movements.length === 0) {
                historyContainer.innerHTML = '<p>No hay movimientos registrados üìã</p>';
            } else {
                let historyHTML = '<table>';
                historyHTML += '<tr><th>üìÖ Fecha</th><th>üìä Tipo</th><th>ü•™ Producto</th><th>üî¢ Cantidad</th><th>üìù Descripci√≥n</th></tr>';
                
                movements.slice(-20).reverse().forEach(mov => {
                    const typeIcon = mov.type === 'Entrada' ? '‚¨ÜÔ∏è' : '‚¨áÔ∏è';
                    const typeColor = mov.type === 'Entrada' ? 'var(--success)' : 'var(--danger)';
                    historyHTML += `
                        <tr>
                            <td style="font-size: 0.9em;">${mov.date}</td>
                            <td style="color: ${typeColor}; font-weight: bold;">${typeIcon} ${mov.type}</td>
                            <td>${mov.product}</td>
                            <td>${mov.quantity}</td>
                            <td style="font-size: 0.9em;">${mov.description}</td>
                        </tr>
                    `;
                });
                
                historyHTML += '</table>';
                historyContainer.innerHTML = historyHTML;
            }
        }
        
        // Mostrar alertas
        function showAlert(type, message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            
            const content = document.querySelector('.content');
            content.insertBefore(alertDiv, content.firstChild);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 4000);
        }
        
        // Cargar datos de ejemplo espec√≠ficos de Danny's Burger
        function loadSampleData() {
            // Stock de ejemplo estilo burguer gourmet
            stock = {
                'Pan Brioche': { quantity: 50, unit: 'unidades' },
                'Medall√≥n Danny\'s': { quantity: 45, unit: 'unidades' },
                'Queso Cheddar': { quantity: 40, unit: 'fetas' },
                'Bacon Ahumado': { quantity: 30, unit: 'tiras' },
                'Tomate Cherry': { quantity: 25, unit: 'unidades' },
                'Lechuga Criolla': { quantity: 35, unit: 'hojas' },
                'Cebolla Morada': { quantity: 20, unit: 'rodajas' },
                'Salsa Danny\'s': { quantity: 15, unit: 'porciones' },
                'Papas R√∫sticas': { quantity: 40, unit: 'porciones' },
                'Aros de Cebolla': { quantity: 25, unit: 'porciones' },
                'Coca Cola': { quantity: 48, unit: 'latas' },
                'Cerveza Artesanal': { quantity: 24, unit: 'botellas' },
                'Agua Saborizada': { quantity: 36, unit: 'botellas' }
            };
            
            // Recetas estilo Danny's Burger
            recipes = {
                'Danny\'s Classic': {
                    ingredients: {
                        'Pan Brioche': 1,
                        'Medall√≥n Danny\'s': 1,
                        'Queso Cheddar': 1,
                        'Lechuga Criolla': 2,
                        'Tomate Cherry': 3,
                        'Salsa Danny\'s': 1
                    },
                    price: 3800
                },
                'Bacon Deluxe': {
                    ingredients: {
                        'Pan Brioche': 1,
                        'Medall√≥n Danny\'s': 1,
                        'Bacon Ahumado': 3,
                        'Queso Cheddar': 2,
                        'Cebolla Morada': 2,
                        'Salsa Danny\'s': 1
                    },
                    price: 4500
                },
                'Combo Danny\'s Special': {
                    ingredients: {
                        'Pan Brioche': 1,
                        'Medall√≥n Danny\'s': 1,
                        'Bacon Ahumado': 2,
                        'Queso Cheddar': 1,
                        'Lechuga Criolla': 2,
                        'Tomate Cherry': 3,
                        'Salsa Danny\'s': 1,
                        'Papas R√∫sticas': 1,
                        'Coca Cola': 1
                    },
                    price: 5200
                },
                'Combo Premium': {
                    ingredients: {
                        'Pan Brioche': 1,
                        'Medall√≥n Danny\'s': 2,
                        'Bacon Ahumado': 3,
                        'Queso Cheddar': 2,
                        'Cebolla Morada': 3,
                        'Salsa Danny\'s': 1,
                        'Aros de Cebolla': 1,
                        'Cerveza Artesanal': 1
                    },
                    price: 6800
                }
            };
            
            showAlert('success', 'üçî ¬°Datos de Danny\'s Burger cargados! Listos para cocinar.');
            updateStockDisplay();
            updateRecipesDisplay();
            updateSalesButtons();
            updateProductSuggestions();
        }
        
        // Limpiar todos los datos
        function clearAllData() {
            if (confirm('‚ö†Ô∏è ¬øEst√°s seguro de eliminar TODOS los datos de Danny\'s Burger? Esta acci√≥n no se puede deshacer.')) {
                stock = {};
                recipes = {};
                sales = [];
                movements = [];
                
                updateStockDisplay();
                updateRecipesDisplay();
                updateSalesButtons();
                updateReports();
                
                showAlert('warning', 'üóëÔ∏è Todos los datos han sido eliminados');
            }
        }
        
        // Inicializar la aplicaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            updateStockDisplay();
        });
    </script>
</body>
</html>