<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Stock</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .nav-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            padding: 30px;
            background: #f8f9fa;
        }
        
        .nav-btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .nav-btn.active {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .content {
            padding: 30px;
            min-height: 500px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            border-color: #3498db;
            outline: none;
        }
        
        .btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stock-card {
            background: linear-gradient(135deg, #fff, #f8f9fa);
            border: 1px solid #ddd;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .stock-card:hover {
            transform: translateY(-5px);
        }
        
        .stock-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.3em;
        }
        
        .stock-quantity {
            font-size: 1.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .stock-quantity.low {
            color: #e74c3c;
        }
        
        .stock-quantity.medium {
            color: #f39c12;
        }
        
        .stock-quantity.good {
            color: #27ae60;
        }
        
        .sales-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .sale-btn {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .sale-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .recipe-item {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .sales-report {
            background: linear-gradient(135deg, #fff, #f8f9fa);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .alert {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .nav-buttons {
                grid-template-columns: 1fr;
                padding: 20px;
            }
            
            .content {
                padding: 20px;
            }
            
            .stock-grid, .sales-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçî Gesti√≥n de Stock</h1>
            <p>Sistema completo para control de inventario</p>
        </div>
        
        <div class="nav-buttons">
            <button class="nav-btn active" onclick="showSection('stock')">üì¶ Stock Actual</button>
            <button class="nav-btn" onclick="showSection('add-stock')">‚ûï Cargar Stock</button>
            <button class="nav-btn" onclick="showSection('recipes')">üçΩÔ∏è Recetas/Combos</button>
            <button class="nav-btn" onclick="showSection('sales')">üí∞ Registrar Venta</button>
            <button class="nav-btn" onclick="showSection('reports')">üìä Reportes</button>
        </div>
        
        <div class="content">
            <!-- Stock Actual -->
            <div id="stock" class="section active">
                <h2>üì¶ Stock Actual</h2>
                <div id="stockDisplay" class="stock-grid">
                    <div class="stock-card">
                        <h3>No hay productos cargados</h3>
                        <p>Comienza agregando productos en la secci√≥n "Cargar Stock"</p>
                    </div>
                </div>
            </div>
            
            <!-- Cargar Stock -->
            <div id="add-stock" class="section">
                <h2>‚ûï Cargar Stock</h2>
                <div class="form-group">
                    <label for="productName">Nombre del Producto:</label>
                    <input type="text" id="productName" placeholder="Ej: Pan de hamburguesa">
                </div>
                <div class="form-group">
                    <label for="productQuantity">Cantidad:</label>
                    <input type="number" id="productQuantity" placeholder="0" min="0">
                </div>
                <div class="form-group">
                    <label for="productUnit">Unidad:</label>
                    <select id="productUnit">
                        <option value="unidades">Unidades</option>
                        <option value="kg">Kilogramos</option>
                        <option value="litros">Litros</option>
                        <option value="gramos">Gramos</option>
                        <option value="ml">Mililitros</option>
                    </select>
                </div>
                <button class="btn" onclick="addStock()">Agregar Producto</button>
                <button class="btn" onclick="loadSampleData()">Cargar Datos de Ejemplo</button>
            </div>
            
            <!-- Recetas/Combos -->
            <div id="recipes" class="section">
                <h2>üçΩÔ∏è Recetas y Combos</h2>
                <div class="form-group">
                    <label for="recipeName">Nombre del Combo/Receta:</label>
                    <input type="text" id="recipeName" placeholder="Ej: Hamburguesa Completa">
                </div>
                <div class="form-group">
                    <label for="recipePrice">Precio de Venta ($):</label>
                    <input type="number" id="recipePrice" placeholder="0" min="0" step="0.01">
                </div>
                <div id="recipeIngredients">
                    <h3>Ingredientes:</h3>
                    <div id="ingredientsList"></div>
                    <button class="btn" onclick="addIngredient()">Agregar Ingrediente</button>
                </div>
                <button class="btn" onclick="saveRecipe()">Guardar Receta</button>
                
                <div id="savedRecipes"></div>
            </div>
            
            <!-- Registrar Ventas -->
            <div id="sales" class="section">
                <h2>üí∞ Registrar Venta</h2>
                <div id="salesButtons" class="sales-grid"></div>
            </div>
            
            <!-- Reportes -->
            <div id="reports" class="section">
                <h2>üìä Reportes</h2>
                <div class="sales-report">
                    <h3>üìà Ventas de Hoy</h3>
                    <div id="todaySales"></div>
                </div>
                <div class="sales-report">
                    <h3>üìã Historial de Movimientos</h3>
                    <div id="movementHistory"></div>
                </div>
                <button class="btn btn-danger" onclick="clearAllData()">üóëÔ∏è Limpiar Todos los Datos</button>
            </div>
        </div>
    </div>
    
    <script>
        // Datos almacenados en memoria
        let stock = {};
        let recipes = {};
        let sales = [];
        let movements = [];
        
        // Funci√≥n para mostrar secciones
        function showSection(sectionName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(sectionName).classList.add('active');
            event.target.classList.add('active');
            
            // Actualizar displays cuando se cambia de secci√≥n
            if (sectionName === 'stock') updateStockDisplay();
            if (sectionName === 'recipes') updateRecipesDisplay();
            if (sectionName === 'sales') updateSalesButtons();
            if (sectionName === 'reports') updateReports();
        }
        
        // Agregar stock
        function addStock() {
            const name = document.getElementById('productName').value.trim();
            const quantity = parseInt(document.getElementById('productQuantity').value);
            const unit = document.getElementById('productUnit').value;
            
            if (!name || quantity < 0) {
                alert('Por favor completa todos los campos correctamente');
                return;
            }
            
            if (stock[name]) {
                stock[name].quantity += quantity;
            } else {
                stock[name] = { quantity, unit };
            }
            
            // Registrar movimiento
            movements.push({
                date: new Date().toLocaleString('es-AR'),
                type: 'Entrada',
                product: name,
                quantity: quantity,
                description: `Carga de stock: ${quantity} ${unit}`
            });
            
            document.getElementById('productName').value = '';
            document.getElementById('productQuantity').value = '';
            
            showAlert('success', `‚úÖ Se agregaron ${quantity} ${unit} de ${name}`);
            updateStockDisplay();
        }
        
        // Actualizar display de stock
        function updateStockDisplay() {
            const container = document.getElementById('stockDisplay');
            
            if (Object.keys(stock).length === 0) {
                container.innerHTML = `
                    <div class="stock-card">
                        <h3>No hay productos cargados</h3>
                        <p>Comienza agregando productos en la secci√≥n "Cargar Stock"</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            for (let [name, data] of Object.entries(stock)) {
                let quantityClass = 'good';
                if (data.quantity <= 5) quantityClass = 'low';
                else if (data.quantity <= 15) quantityClass = 'medium';
                
                const card = document.createElement('div');
                card.className = 'stock-card';
                card.innerHTML = `
                    <h3>${name}</h3>
                    <div class="stock-quantity ${quantityClass}">
                        ${data.quantity} ${data.unit}
                    </div>
                    <button class="btn btn-danger" onclick="removeProduct('${name}')">Eliminar</button>
                `;
                container.appendChild(card);
            }
        }
        
        // Eliminar producto
        function removeProduct(name) {
            if (confirm(`¬øEst√°s seguro de eliminar "${name}" del stock?`)) {
                delete stock[name];
                updateStockDisplay();
                showAlert('warning', `‚ö†Ô∏è Se elimin√≥ ${name} del stock`);
            }
        }
        
        // Agregar ingrediente a receta
        function addIngredient() {
            const container = document.getElementById('ingredientsList');
            const ingredientDiv = document.createElement('div');
            ingredientDiv.className = 'recipe-item';
            
            const stockOptions = Object.keys(stock).map(item => 
                `<option value="${item}">${item}</option>`
            ).join('');
            
            ingredientDiv.innerHTML = `
                <select class="ingredient-select">
                    <option value="">Seleccionar producto...</option>
                    ${stockOptions}
                </select>
                <input type="number" placeholder="Cantidad" min="1" class="ingredient-quantity" style="width: 100px; margin: 0 10px;">
                <button class="btn btn-danger" onclick="this.parentElement.remove()">Quitar</button>
            `;
            
            container.appendChild(ingredientDiv);
        }
        
        // Guardar receta
        function saveRecipe() {
            const name = document.getElementById('recipeName').value.trim();
            const price = parseFloat(document.getElementById('recipePrice').value);
            const ingredientItems = document.querySelectorAll('#ingredientsList .recipe-item');
            
            if (!name || !price || ingredientItems.length === 0) {
                alert('Por favor completa todos los campos de la receta');
                return;
            }
            
            const ingredients = {};
            let validRecipe = true;
            
            ingredientItems.forEach(item => {
                const select = item.querySelector('.ingredient-select');
                const quantity = item.querySelector('.ingredient-quantity');
                
                if (select.value && quantity.value) {
                    ingredients[select.value] = parseInt(quantity.value);
                } else {
                    validRecipe = false;
                }
            });
            
            if (!validRecipe) {
                alert('Todos los ingredientes deben tener producto y cantidad');
                return;
            }
            
            recipes[name] = { ingredients, price };
            
            document.getElementById('recipeName').value = '';
            document.getElementById('recipePrice').value = '';
            document.getElementById('ingredientsList').innerHTML = '';
            
            showAlert('success', `‚úÖ Receta "${name}" guardada correctamente`);
            updateRecipesDisplay();
        }
        
        // Actualizar display de recetas
        function updateRecipesDisplay() {
            const container = document.getElementById('savedRecipes');
            container.innerHTML = '<h3>Recetas Guardadas:</h3>';
            
            for (let [name, recipe] of Object.entries(recipes)) {
                const recipeDiv = document.createElement('div');
                recipeDiv.className = 'recipe-item';
                
                const ingredientsList = Object.entries(recipe.ingredients)
                    .map(([ingredient, quantity]) => `${quantity} ${ingredient}`)
                    .join(', ');
                
                recipeDiv.innerHTML = `
                    <div>
                        <strong>${name}</strong> - $${recipe.price}<br>
                        <small>Ingredientes: ${ingredientsList}</small>
                    </div>
                    <button class="btn btn-danger" onclick="deleteRecipe('${name}')">Eliminar</button>
                `;
                
                container.appendChild(recipeDiv);
            }
        }
        
        // Eliminar receta
        function deleteRecipe(name) {
            if (confirm(`¬øEliminar la receta "${name}"?`)) {
                delete recipes[name];
                updateRecipesDisplay();
                updateSalesButtons();
                showAlert('warning', `‚ö†Ô∏è Se elimin√≥ la receta ${name}`);
            }
        }
        
        // Actualizar botones de venta
        function updateSalesButtons() {
            const container = document.getElementById('salesButtons');
            container.innerHTML = '';
            
            if (Object.keys(recipes).length === 0) {
                container.innerHTML = `
                    <div class="sale-btn" style="background: #95a5a6; cursor: not-allowed;">
                        No hay recetas disponibles<br>
                        <small>Crea recetas en la secci√≥n correspondiente</small>
                    </div>
                `;
                return;
            }
            
            for (let [name, recipe] of Object.entries(recipes)) {
                const canMake = checkCanMakeRecipe(name);
                const button = document.createElement('button');
                button.className = 'sale-btn';
                
                if (canMake) {
                    button.onclick = () => makeSale(name);
                    button.innerHTML = `
                        ${name}<br>
                        <small>$${recipe.price}</small>
                    `;
                } else {
                    button.style.background = '#e74c3c';
                    button.style.cursor = 'not-allowed';
                    button.innerHTML = `
                        ${name}<br>
                        <small>Sin stock suficiente</small>
                    `;
                }
                
                container.appendChild(button);
            }
        }
        
        // Verificar si se puede hacer la receta
        function checkCanMakeRecipe(recipeName) {
            const recipe = recipes[recipeName];
            
            for (let [ingredient, needed] of Object.entries(recipe.ingredients)) {
                if (!stock[ingredient] || stock[ingredient].quantity < needed) {
                    return false;
                }
            }
            
            return true;
        }
        
        // Realizar venta
        function makeSale(recipeName) {
            if (!checkCanMakeRecipe(recipeName)) {
                alert('No hay stock suficiente para esta receta');
                return;
            }
            
            const recipe = recipes[recipeName];
            
            // Descontar ingredientes del stock
            for (let [ingredient, needed] of Object.entries(recipe.ingredients)) {
                stock[ingredient].quantity -= needed;
                
                // Registrar movimiento
                movements.push({
                    date: new Date().toLocaleString('es-AR'),
                    type: 'Salida',
                    product: ingredient,
                    quantity: needed,
                    description: `Venta: ${recipeName}`
                });
            }
            
            // Registrar venta
            sales.push({
                date: new Date().toLocaleString('es-AR'),
                product: recipeName,
                price: recipe.price
            });
            
            showAlert('success', `‚úÖ Venta registrada: ${recipeName} - $${recipe.price}`);
            updateSalesButtons();
            updateStockDisplay();
        }
        
        // Actualizar reportes
        function updateReports() {
            // Ventas de hoy
            const today = new Date().toLocaleDateString('es-AR');
            const todaySales = sales.filter(sale => 
                sale.date.startsWith(today.split('/').reverse().join('-').substring(0, 10))
            );
            
            let todayTotal = 0;
            const todayContainer = document.getElementById('todaySales');
            
            if (todaySales.length === 0) {
                todayContainer.innerHTML = '<p>No hay ventas registradas hoy</p>';
            } else {
                let salesHTML = '<table style="width: 100%; border-collapse: collapse;">';
                salesHTML += '<tr style="background: #f8f9fa;"><th style="padding: 10px; border: 1px solid #ddd;">Producto</th><th style="padding: 10px; border: 1px solid #ddd;">Precio</th><th style="padding: 10px; border: 1px solid #ddd;">Hora</th></tr>';
                
                todaySales.forEach(sale => {
                    todayTotal += sale.price;
                    const time = sale.date.split(' ')[1];
                    salesHTML += `<tr><td style="padding: 10px; border: 1px solid #ddd;">${sale.product}</td><td style="padding: 10px; border: 1px solid #ddd;">$${sale.price}</td><td style="padding: 10px; border: 1px solid #ddd;">${time}</td></tr>`;
                });
                
                salesHTML += '</table>';
                salesHTML += `<p><strong>Total del d√≠a: $${todayTotal}</strong></p>`;
                todayContainer.innerHTML = salesHTML;
            }
            
            // Historial de movimientos
            const historyContainer = document.getElementById('movementHistory');
            
            if (movements.length === 0) {
                historyContainer.innerHTML = '<p>No hay movimientos registrados</p>';
            } else {
                let historyHTML = '<table style="width: 100%; border-collapse: collapse;">';
                historyHTML += '<tr style="background: #f8f9fa;"><th style="padding: 8px; border: 1px solid #ddd;">Fecha</th><th style="padding: 8px; border: 1px solid #ddd;">Tipo</th><th style="padding: 8px; border: 1px solid #ddd;">Producto</th><th style="padding: 8px; border: 1px solid #ddd;">Cantidad</th><th style="padding: 8px; border: 1px solid #ddd;">Descripci√≥n</th></tr>';
                
                movements.slice(-20).reverse().forEach(mov => {
                    const typeColor = mov.type === 'Entrada' ? '#27ae60' : '#e74c3c';
                    historyHTML += `
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ddd; font-size: 0.9em;">${mov.date}</td>
                            <td style="padding: 8px; border: 1px solid #ddd; color: ${typeColor}; font-weight: bold;">${mov.type}</td>
                            <td style="padding: 8px; border: 1px solid #ddd;">${mov.product}</td>
                            <td style="padding: 8px; border: 1px solid #ddd;">${mov.quantity}</td>
                            <td style="padding: 8px; border: 1px solid #ddd; font-size: 0.9em;">${mov.description}</td>
                        </tr>
                    `;
                });
                
                historyHTML += '</table>';
                historyContainer.innerHTML = historyHTML;
            }
        }
        
        // Mostrar alertas
        function showAlert(type, message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            
            const content = document.querySelector('.content');
            content.insertBefore(alertDiv, content.firstChild);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        }
        
        // Cargar datos de ejemplo
        function loadSampleData() {
            // Stock de ejemplo
            stock = {
                'Pan de hamburguesa': { quantity: 50, unit: 'unidades' },
                'Medall√≥n de carne': { quantity: 45, unit: 'unidades' },
                'Queso cheddar': { quantity: 30, unit: 'fetas' },
                'Tomate': { quantity: 20, unit: 'unidades' },
                'Lechuga': { quantity: 15, unit: 'hojas' },
                'Papas fritas': { quantity: 25, unit: 'porciones' },
                'Coca Cola': { quantity: 48, unit: 'unidades' },
                'Agua': { quantity: 24, unit: 'botellas' }
            };
            
            // Recetas de ejemplo
            recipes = {
                'Hamburguesa Simple': {
                    ingredients: {
                        'Pan de hamburguesa': 1,
                        'Medall√≥n de carne': 1
                    },
                    price: 2500
                },
                'Hamburguesa Completa': {
                    ingredients: {
                        'Pan de hamburguesa': 1,
                        'Medall√≥n de carne': 1,
                        'Queso cheddar': 1,
                        'Tomate': 2,
                        'Lechuga': 2
                    },
                    price: 3500
                },
                'Combo Completo': {
                    ingredients: {
                        'Pan de hamburguesa': 1,
                        'Medall√≥n de carne': 1,
                        'Queso cheddar': 1,
                        'Tomate': 2,
                        'Lechuga': 2,
                        'Papas fritas': 1,
                        'Coca Cola': 1
                    },
                    price: 4800
                }
            };
            
            showAlert('success', '‚úÖ Datos de ejemplo cargados correctamente');
            updateStockDisplay();
            updateRecipesDisplay();
            updateSalesButtons();
        }
        
        // Limpiar todos los datos
        function clearAllData() {
            if (confirm('‚ö†Ô∏è ¬øEst√°s seguro de eliminar TODOS los datos? Esta acci√≥n no se puede deshacer.')) {
                stock = {};
                recipes = {};
                sales = [];
                movements = [];
                
                updateStockDisplay();
                updateRecipesDisplay();
                updateSalesButtons();
                updateReports();
                
                showAlert('warning', 'üóëÔ∏è Todos los datos han sido eliminados');
            }
        }
        
        // Inicializar la aplicaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            updateStockDisplay();
        });
    </script>
</body>
</html>